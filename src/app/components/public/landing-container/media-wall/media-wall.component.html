<h1 class="title">Our Social Media Wall</h1>

<ng-container>
  <div class="card-container">
    <!-- Loop through posts dynamically fetched from the backend -->
    <mat-card class="example-card" appearance="outlined" *ngFor="let item of post">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>{{ item.title }}</mat-card-title>
      </mat-card-header>

      <!-- Post image/video -->
      <video mat-card-image controls
             [src]="'https://storage.cloud.google.com/road-eye/video-uploads/' + item.video_link + '.mp4'"
             alt="Video"
             (play)="onVideoPlayed(item)">
      </video>

      <mat-card-actions>
        <button mat-stroked-button color="primary" (click)="likePost(item)">
          {{ item.likes }} <mat-icon>thumb_up</mat-icon>
        </button>
        <button mat-stroked-button color="primary">
          {{ item.views }} <mat-icon>visibility</mat-icon>
        </button>
        <button mat-button (click)="toggleDetails(item.id)">
          {{ item.showDetails ? 'Hide Details' : 'View More Details' }}
        </button>
        <button mat-button color="warn">Delete</button>
      </mat-card-actions>

      <div *ngIf="item.showDetails">
        <p><strong>Description:</strong> {{ item.description }}</p>
        <p><strong>Likes:</strong> {{ item.likes }}</p>
        <p><strong>Views:</strong> {{ item.views }}</p>
        <p><strong>Comments:</strong> {{ item.comments }}</p>
      </div>
    </mat-card>
  </div>
</ng-container>


<div class="row">
  <div class="col">
    <mat-card class="example-card" appearance="outlined"  routerLink="./one-video" *ngFor="let item of post">
      <img mat-card-image src="https://avnetlaw.com/wp-content/uploads/2019/02/car-accident-1200x800.jpg" alt="Photo of a Shiba Inu">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>Road Accident Near Colombo</mat-card-title>
        <mat-card-subtitle>2 hrs ago</mat-card-subtitle>
      </mat-card-header>
      <mat-card-actions class="actions">
        <button mat-stroked-button color="primary" style="margin-right: 10px">23 <mat-icon>thumb_up</mat-icon></button>
        <button mat-stroked-button color="primary"> 50 <mat-icon>visibility</mat-icon></button>
      </mat-card-actions>
    </mat-card>
  </div>
  <div class="col">
    <mat-card class="example-card" appearance="outlined">
      <img mat-card-image src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>Road Accident Near Colombo</mat-card-title>
        <mat-card-subtitle>2 hrs ago</mat-card-subtitle>
      </mat-card-header>
      <mat-card-actions class="actions">
        <button mat-stroked-button color="primary" style="margin-right: 10px">23 <mat-icon>thumb_up</mat-icon></button>
        <button mat-stroked-button color="primary"> 50 <mat-icon>visibility</mat-icon></button>
      </mat-card-actions>
    </mat-card>
  </div>
  <div class="col">
    <mat-card class="example-card" appearance="outlined">
      <img mat-card-image src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>Road Accident Near Colombo</mat-card-title>
        <mat-card-subtitle>2 hrs ago</mat-card-subtitle>
      </mat-card-header>
      <mat-card-actions class="actions">
        <button mat-stroked-button color="primary" style="margin-right: 10px">23 <mat-icon>thumb_up</mat-icon></button>
        <button mat-stroked-button color="primary"> 50 <mat-icon>visibility</mat-icon></button>
      </mat-card-actions>
    </mat-card>
  </div>
  <div class="col">
    <mat-card class="example-card" appearance="outlined">
      <img mat-card-image src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>Road Accident Near Colombo</mat-card-title>
        <mat-card-subtitle>2 hrs ago</mat-card-subtitle>
      </mat-card-header>
      <mat-card-actions class="actions">
        <button mat-stroked-button color="primary" style="margin-right: 10px">23 <mat-icon>thumb_up</mat-icon></button>
        <button mat-stroked-button color="primary"> 50 <mat-icon>visibility</mat-icon></button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
